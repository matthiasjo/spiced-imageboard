<!DOCTYPE html>
<html>
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <link rel="stylesheet" href="/styles.css" type="text/css" />
        <title>Salt Image Board</title>
    </head>

    <body>
        <div class="" id="main">
            <form>
                <input
                    v-model="formUpload.title"
                    type="text"
                    name="title"
                    value=""
                    placeholder="image title"
                />
                <input
                    v-model="formUpload.description"
                    type="text"
                    name="description"
                    value=""
                    placeholder="image description"
                />
                <input
                    v-model="formUpload.username"
                    type="text"
                    name="username"
                    value=""
                    placeholder="enter your username"
                />
                <input
                    type="file"
                    name="file"
                    value=""
                    accept="image/*"
                    @change="handleFiles"
                />
                <button @click.prevent.default="uploadFile">Upload</button>
            </form>

            <div class="cardcontainer">
                <div
                    class="card"
                    v-for="image in images"
                    @click="toggleModal(image.id)"
                >
                    <div class="picture">
                        <img class="imgOverview" :src="image.url" alt="image" />
                    </div>
                    <div class="subtitle"><p>{{image.title}}</p></div>
                </div>
            </div>
            <modal-component
                v-if="clickedImgCard"
                :clicked-img-card="clickedImgCard"
            ></modal-component>
        </div>
        <script id="modal-template" type="text/x-template">
                                    <div class="modal-container">
                                <div class="modal">
                                <div class="picture">
                                    <img class="imgModal" :src="modalContent.url" alt="image" />
                                <h2>{{modalContent.title}}</h2>
                                <h3>{{modalContent.description}}</h3>
                                <p>Uploaded by {{modalContent.username}} at {{modalContent.created_at}}</p>
                            </div>
                            </div>
                            <div>
                            <form>
                                <input
                                    v-model="sendComment.comment"
                                    type="text"
                                    name="comment"
                                    value=""
                                    placeholder="image description"
                                />
                                <input
                                    v-model="sendComment.username"
                                    type="text"
                                    name="username"
                                    value=""
                                    placeholder="enter your username"
                                />
                                <button @click.prevent.default="uploadComment">Comment</button>
                            </form>
                        </div>
                        <div  v-if="modalContent.comment">
                            <li>
                <h3>{{modalContent.comment}}</h3>
                <h4>{{modalContent.comment_user}} on {{modalContent.comment_timestamp}}</h4>
            </li>
                        </div>
                        </div>
        </script>

        <script src="/js/vue.js"></script>
        <script src="/js/axios.min.js"></script>
        <script src="/js/script.js"></script>
    </body>
</html>
